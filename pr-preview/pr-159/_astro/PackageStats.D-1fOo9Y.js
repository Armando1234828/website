import{j as t}from"./jsx-runtime.Ol9K6dT-.js";import{r as n}from"./index.DFv2mRv-.js";const v=()=>{const[m,c]=n.useState(0),[l,d]=n.useState({stars:0,forks:0}),[g,u]=n.useState(null),i=({targetNumber:e})=>{const[s,o]=n.useState(0);let a=null;return n.useEffect(()=>{let r=0;return a=setInterval(()=>{r=Math.min(r+e/650,e),o(Math.round(r))},15),()=>{clearInterval(a)}},[e]),n.useEffect(()=>{s>=e&&clearInterval(a)},[s,e]),t.jsx("p",{style:{marginTop:"5px",fontSize:"25px",color:"var(--sl-color-text-accent)"},children:s.toLocaleString()})},h=async()=>{try{const o=(await(await fetch("https://api.npmjs.org/downloads/range/1000-01-01:2030-12-31/aoi.js")).json()).downloads.reduce((a,r)=>a+r.downloads,0);c(o),x("npm",o)}catch{return}},f=async()=>{try{const s=await(await fetch("https://api.github.com/repos/aoijs/aoi.js")).json(),o={stars:s.stargazers_count,forks:s.forks_count};d(o),x("git",o)}catch(e){console.error("Error fetching GitHub repo stats:",e)}},p=e=>{const s=localStorage.getItem(e);if(s){const{data:o,timestamp:a}=JSON.parse(s);if(a&&Date.now()-a<36e5)return u(new Date(a).toLocaleString()),{data:o,timestamp:a};console.log({data:o,timestamp:a})}return null},x=(e,s)=>{const o=Date.now(),a={data:s,timestamp:o};localStorage.setItem(e,JSON.stringify(a))};return n.useEffect(()=>{const e=p("npm"),s=p("git");e!==null&&s!==null?(c(e.data),d(s.data)):(h(),f())},[]),t.jsxs("div",{className:"not-content",style:{position:"relative",display:"flex",border:"1px solid var(--sl-color-gray-5)",borderRadius:"5px",justifyContent:"space-around",alignItems:"center",marginTop:"2rem",backgroundColor:"transparent",backdropFilter:"blur(16px)",flexDirection:"row",flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[t.jsx("p",{style:{color:"var(--sl-color-text-accent)",fontSize:window.innerWidth<=768?"20px":"30px",padding:"15px 15px"},children:"Downloads"}),t.jsx(i,{targetNumber:m}),t.jsx("div",{style:{marginBottom:"1rem"}})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[t.jsx("p",{style:{color:"var(--sl-color-text-accent)",fontSize:window.innerWidth<=768?"20px":"30px",padding:"15px 15px"},children:"Stars"}),t.jsx(i,{targetNumber:l.stars}),t.jsx("div",{style:{marginBottom:"1rem"}})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[t.jsx("p",{style:{color:"var(--sl-color-text-accent)",fontSize:window.innerWidth<=768?"20px":"30px",padding:"15px 15px"},children:"Forks"}),t.jsx(i,{targetNumber:l.forks}),t.jsx("div",{style:{marginBottom:"1rem"}})]}),t.jsxs("div",{style:{marginTop:"auto",marginBottom:"15px",color:"var(--sl-color-text-accent)",fontSize:window.innerWidth<=768?"10px":"14px"},children:[t.jsx("div",{children:t.jsx("a",{href:"https://github.com/aoijs/aoi.js",children:t.jsx("img",{loading:"eager",decoding:"async",alt:"aoi.js banner image",style:{filter:"drop-shadow(0 0 3rem var(--overlay-blurple))"},src:"https://github.com/aoijs/website/raw/master/assets/images/aoijs-banner.png?raw=true",width:"350",height:"125"})})}),t.jsxs("p",{style:{textAlign:"center",color:"var(--sl-color-gray-4)"},children:["Last fetched:"," ",g??`${new Date(Date.now()).toLocaleString()} (now)`]})]})]})};export{v as default};
